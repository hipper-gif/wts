name: ğŸ”¥ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ‰‹å‹•ã®ã¿ï¼‰
on:
  workflow_dispatch:
    inputs:
      confirmation:
        description: 'æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ'
        required: true
        default: 'no'
        type: choice
        options:
        - 'no'
        - 'yes'
      message:
        description: 'ãƒ‡ãƒ—ãƒ­ã‚¤ç†ç”±ãƒ»ãƒ¡ãƒ¢'
        required: false
        default: ''

jobs:
  deploy-production:
    name: æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
    runs-on: ubuntu-latest
    
    steps:
    - name: âš ï¸ ç¢ºèªãƒã‚§ãƒƒã‚¯
      if: github.event.inputs.confirmation != 'yes'
      run: |
        echo "âŒ ãƒ‡ãƒ—ãƒ­ã‚¤ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ"
        echo "ç¢ºèªæ¬„ã§ 'yes' ã‚’é¸æŠã—ã¦ãã ã•ã„"
        exit 1
    
    - name: ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
      uses: actions/checkout@v4
    
    - name: ğŸ”¥ æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤
      uses: SamKirkland/FTP-Deploy-Action@4.3.3
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        local-dir: ./wts/
        # ğŸ¯ æœ¬ç•ªç’°å¢ƒãƒ‘ã‚¹
        server-dir: /tw1nkle.com/public_html/Smiley/taxi/wts/
        exclude: |
          **/.git*
          **/.gitignore
          **/README.md
          **/.github/**
          **/node_modules/**
        dry-run: false
        log-level: verbose
    
    - name: âœ… æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†é€šçŸ¥
      run: |
        echo "ğŸ‰ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼"
        echo "ğŸŒ URL: https://tw1nkle.com/Smiley/taxi/wts/"
        echo "ğŸ“ ãƒ‡ãƒ—ãƒ­ã‚¤ç†ç”±: ${{ github.event.inputs.message }}"
